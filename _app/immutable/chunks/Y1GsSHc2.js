import"./DsnmJJEf.js";import{p as V,a as W,f as g,c as X,s as u,r as H,b as m,d as Z,g as e,u as f,t as c,e as J,h as p,i as $}from"./B3pDDWNG.js";import{d as ee,e as K}from"./Pjzw0EU-.js";import{p as te,r as ae,i as I}from"./EBTQ-C5a.js";import{a as ie,e as P,i as S,p as oe,s as h,c as b,b as _,d as j,m as re}from"./BrEE7BNU.js";var le=(Y,t,M)=>t.onSelectPerson(e(M)),fe=g('<div class="absolute w-full translate-y-full pt-1 text-center text-neutral-600">?</div>'),ne=g("<div></div>"),de=g('<div class="absolute w-full -translate-y-full pb-1 text-center text-neutral-600">?</div> <!>',1),se=g('<div class="pointer-events-none absolute z-10 flex w-8 items-center justify-center md:w-10"><div class="h-1.5 w-6 rounded bg-purple-400"></div></div>'),me=g('<div role="presentation"></div>'),ve=g('<div><div role="presentation"></div> <!> <!> <!> <!></div>'),ce=$('<path fill="none" stroke-dasharray="4 3"></path>'),ge=g('<div><div class="absolute top-0 left-0 flex h-full"><!> <svg></svg></div></div>');function ye(Y,t){V(t,!0);let M=te(t,"highlightedMarriages",31,()=>W([])),L=ae(t,["$$slots","$$events","$$legacy","config","highlightedMarriages","marriageConnections","onSelectPerson"]);var T=ge();ie(T,()=>({class:"no-scrollbar relative mr-(--panel-r-width) ml-3 h-full cursor-pointer overflow-auto border-t",role:"presentation",...L}));var A=X(T),E=X(A);P(E,17,()=>oe,S,(z,a)=>{var l=ve();const n=f(()=>e(a).lifetime.from||e(a).lifetime.estimatedFrom),v=f(()=>e(a).lifetime.to||e(a).lifetime.estimatedTo),x=f(()=>!!e(a).lifetime.from&&e(n)>=t.config.year.from),B=f(()=>!!e(a).lifetime.to&&e(v)<=t.config.year.to),C=f(()=>re.filter(i=>i.spouse1===e(a).id||i.spouse2===e(a).id));var o=X(l);o.__dblclick=[le,t,a];var y=u(o,2);{var D=i=>{var r=fe();c(s=>_(r,`
              bottom: ${s??""}px;
            `),[()=>Math.max(0,t.config.year.to-(e(v)||t.config.year.to)-1)*t.config.pixel]),m(i,r)};I(y,i=>{e(a).lifetime.estimatedTo&&i(D)})}var F=u(y,2);{var N=i=>{var r=de(),s=J(r),O=u(s,2);{var w=d=>{var k=ne();c(Q=>{h(k,1,b(["absolute left-1/2 w-3.5 -translate-x-1/2 rounded-full",e(a).sex==="m"?"bg-sky-300":"bg-pink-300"])),_(k,`
                bottom: ${Q??""}px;
                height: ${t.config.pixel*5}px;
              `)},[()=>Math.max(0,t.config.year.to-(e(v)||t.config.year.to)-1)*t.config.pixel]),m(d,k)};I(O,d=>{e(a).lifetime.to&&d(w)})}c(d=>_(s,`
                top: ${d??""}px;
              `),[()=>(Math.max(t.config.year.from,e(n))-t.config.year.from)*t.config.pixel]),m(i,r)};I(F,i=>{e(a).lifetime.estimatedFrom&&i(N)})}var G=u(F,2);P(G,17,()=>e(C),S,(i,r)=>{var s=se();c(()=>_(s,`
              height: ${t.config.pixel??""}px;
              top: ${(e(r).year-t.config.year.from)*t.config.pixel}px;
            `)),m(i,s)});var R=u(G,2);{var U=i=>{var r=p(),s=J(r);P(s,17,()=>e(a).roles,S,(O,w)=>{var d=me();h(d,1,b(["absolute left-1/2 -translate-x-1/2","w-1 rounded-full bg-blue-600"])),c((k,Q)=>{_(d,`
                top: ${k??""}px;
                bottom: ${Q??""}px;
              `),j(d,"title",e(w).name)},[()=>(Math.max(t.config.year.from,e(w).from)-t.config.year.from+.5)*t.config.pixel,()=>(Math.max(0,t.config.year.to-e(w).to-1)+.5)*t.config.pixel]),m(O,d)}),m(i,r)};I(R,i=>{e(a).roles?.length&&i(U)})}H(l),c((i,r)=>{h(l,1,b(["relative w-8 flex-none border-r border-dashed md:w-10",e(a).id==="muhammad"&&"-ml-px border-l !border-solid border-neutral-300 bg-emerald-100"])),h(o,1,b(["absolute left-1/2 -translate-x-1/2",e(a).lifetime.from&&e(a).lifetime.from?"w-3.5":"w-0.5",e(x)&&"rounded-t-full",e(B)&&"rounded-b-full",e(a).sex==="m"?"bg-sky-300":"bg-pink-300"])),_(o,`
            top: ${i??""}px;
            bottom: ${r??""}px;
          `),j(o,"title",e(a).name)},[()=>(Math.max(t.config.year.from,e(n))-t.config.year.from)*t.config.pixel,()=>Math.max(0,t.config.year.to-(e(v)||t.config.year.to)-1)*t.config.pixel]),K("mouseenter",o,()=>M(e(C))),K("mouseleave",o,()=>M([])),m(z,l)});var q=u(E,2);h(q,0,b(["pointer-events-none absolute top-0 left-0 h-full w-full","*:pointer-events-auto"])),P(q,21,()=>t.marriageConnections,S,(z,a)=>{let l=()=>e(a).from,n=()=>e(a).to,v=()=>e(a).isHighlighted;var x=ce();const B=f(()=>(l().x+n().x)/2),C=f(()=>(l().y+n().y)/2),o=f(()=>n().x-l().x),y=f(()=>n().y-l().y),D=f(()=>Math.sqrt(e(o)*e(o)+e(y)*e(y))),F=f(()=>e(D)*(e(o)>500?e(o)>700?.3:.25:.1));c(()=>{j(x,"d",`M ${l().x},${l().y} Q ${e(B)},${e(C)+e(F)} ${n().x},${n().y}`),j(x,"stroke-width",v()?2:1),h(x,0,b([v()?"stroke-purple-500":"stroke-purple-500/20 hover:stroke-purple-500"]))}),m(z,x)}),H(q),H(A),H(T),m(Y,T),Z()}ee(["dblclick"]);export{ye as default};
